<!-- =========================
     index.html (PÁGINA PRINCIPAL)
     ========================= -->
<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),
          dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-N7R6CHP6');
  </script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Casino Ganamos</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="estilo.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="shortcut icon" href="./img/logopixelzulma-removebg-preview.png" type="image/x-icon"/>

  <!-- Animaciones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- Frases (usa tu frases.js) -->
  <script src="frases.js" defer></script>

  <script defer>
    document.addEventListener('DOMContentLoaded', () => {
      const boton = document.getElementById('whatsappButton');
      const input = document.getElementById('nombreUsuario');

      function generarEventId() {
        try {
          if (window.crypto && typeof window.crypto.randomUUID === "function") {
            return window.crypto.randomUUID();
          }
        } catch {}
        return "evt_" + Date.now() + "_" + Math.random().toString(16).slice(2);
      }

      function pushDL(obj) {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push(obj);
      }

      function goToGoPage() {
        // Si tu sitio está en subcarpeta, esto funciona igual:
        // go.html al lado del index.
        const base = window.location.href.split("#")[0].split("?")[0];
        const goUrl = new URL("go.html", base).toString();
        window.location.href = goUrl;
      }

      boton.addEventListener('click', (e) => {
        e.preventDefault();

        const nombre = input.value.trim();
        if (!nombre) {
          alert("Por favor escribe tu nombre antes de continuar.");
          input.focus();
          return;
        }

        const event_id = generarEventId();

        // Guardamos datos para que go.html los lea
        sessionStorage.setItem("wa_nombre", nombre);
        sessionStorage.setItem("wa_event_id", event_id);
        sessionStorage.setItem("wa_ts", String(Date.now()));

        // Evento init (intención)
        pushDL({
          event: "whatsapp_click",
          step: "init",
          button_id: "whatsappButton",
          event_id
        });

        // ✅ Navegación instantánea a página intermedia REAL (no about:blank)
        goToGoPage();
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') boton.click();
      });
    });
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7R6CHP6"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Logo -->
  <div class="logo animate_animated animate_flip">
    <img src="./img/diseño.PNG" alt="Ganamos.co">
  </div>

  <!-- Título -->
  <div class="main-title">
    <p>Para crear tu cuenta</p>
    <p>envíanos un Whatsapp</p>
    <h2>haciendo click en el botón de abajo</h2>
  </div>

  <!-- Input nombre -->
  <div style="text-align: center; margin: 20px;">
    <input
      type="text"
      id="nombreUsuario"
      placeholder="Escribe tu nombre aquí"
      style="padding: 10px; width: 80%; max-width: 300px;"
    />
  </div>

  <!-- Botón WhatsApp (NO lo cambiamos como pediste) -->
  <div class="whatsapp">
    <a class="button" href="#" target="_blank" id="whatsappButton">
      <span>Crea tu usuario</span>
      <img src="./img/whatsapp-64.png" alt="WhatsApp Logo">
    </a>
  </div>

  <!-- Info -->
  <div class="MINIMO">
    <p>Minimo de Carga $3000</p>
  </div>

  <div class="info-section">
    <img src="./img/bank_6719375.png" class="info-logo" alt="">
    <p class="info-text">Aceptamos transferencias bancarias.</p>
  </div>

  <div class="info-section">
    <img src="./img/24-hours_1274033.png" class="info-logo" alt="">
    <p class="info-text">Estamos cargando las 24 hs todos los días.</p>
  </div>

  <div class="TERMINO">
    <p class="info-text">Prohibido el juego de azar a menores de 18 años.</p>
  </div>
</body>
</html>


